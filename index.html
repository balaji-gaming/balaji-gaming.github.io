<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Balaji Gaming Lucky Draw Game</title>
<style>
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: radial-gradient(circle, #020617, #020617);
  color: #fff;
  text-align: center;
}

h1 {
  margin-top: 20px;
}

.container {
  margin-top: 20px;
}

input {
  padding: 10px;
  margin: 8px;
  width: 260px;
  border-radius: 6px;
  border: none;
  outline: none;
}

button {
  padding: 12px 25px;
  background: #22c55e;
  border: none;
  border-radius: 8px;
  font-size: 16px;
  cursor: pointer;
  transition: background 0.3s;
}

button:hover {
  background: #16a34a;
}

.wheel-container {
  position: relative;
  width: 320px;
  height: 320px;
  margin: 30px auto;
}

.pointer {
  position: absolute;
  top: -10px;
  left: 50%;
  transform: translateX(-50%);
  width: 0;
  height: 0;
  border-left: 15px solid transparent;
  border-right: 15px solid transparent;
  border-bottom: 25px solid white;
  z-index: 10;
}

#result {
  margin-top: 20px;
  font-size: 18px;
}

#confettiCanvas {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 9999;
}
</style>
</head>
<body>

<h1> ðŸŽ¡ Balaji Gaming Lucky Draw Game</h1>

<div class="container">
  <input id="name" placeholder="Enter your name">
  <br>
  <input id="phone" placeholder="Enter 10-digit phone number">
  <br>

  <div class="wheel-container">
    <div class="pointer"></div>
    <canvas id="wheel" width="320" height="320"></canvas>
  </div>

  <button onclick="spinWheel()">SPIN</button>

  <div id="result"></div>
</div>

<canvas id="confettiCanvas"></canvas>

<script>
const canvas = document.getElementById("wheel");
const ctx = canvas.getContext("2d");
const resultDiv = document.getElementById("result");
const confettiCanvas = document.getElementById("confettiCanvas");
const confettiCtx = confettiCanvas.getContext("2d");

confettiCanvas.width = window.innerWidth;
confettiCanvas.height = window.innerHeight;

const prizes = ["$100","$200","$300","$400","$500","$600","$700","$800","$900","$1000"];
const colors = ["#ff5e5e","#ffbe5e","#5eff5e","#5edfff","#5e5eff","#be5eff","#ff5ebc","#ffd35e","#5effc1","#5e9eff"];
let startAngle = 0;

function drawWheel() {
  const num = prizes.length;
  const arc = 2 * Math.PI / num;
  const radius = canvas.width / 2;
  ctx.clearRect(0,0,canvas.width,canvas.height);

  for(let i=0;i<num;i++){
    const angle = startAngle + i*arc;

    // Draw segment
    ctx.beginPath();
    ctx.moveTo(radius,radius);
    ctx.arc(radius,radius,radius,angle,angle+arc);
    ctx.fillStyle = colors[i%colors.length];
    ctx.fill();
    ctx.strokeStyle="#fff";
    ctx.lineWidth=2;
    ctx.stroke();

    // Draw prize text
    ctx.save();
    ctx.translate(radius,radius);
    ctx.rotate(angle+arc/2);
    ctx.textAlign="right";
    ctx.fillStyle="#fff";
    ctx.font="bold 16px Arial";
    ctx.fillText(prizes[i], radius-10, 0);
    ctx.restore();
  }
}

drawWheel();

function spinWheel(){
  const name = document.getElementById("name").value.trim();
  const phone = document.getElementById("phone").value.trim();
  if(!name){ alert("Enter your name"); return; }
  if(!/^[6-9]\d{9}$/.test(phone)){ alert("Enter valid 10-digit phone number"); return; }

  const num = prizes.length;
  const arcDeg = 360/num;
  const randomIndex = Math.floor(Math.random()*num);
  const spins = 3600 + randomIndex*arcDeg + arcDeg/2;
  const rotation = spins*Math.PI/180;
  const duration = 4000;
  const start = performance.now();
  const initial = startAngle;

  function animate(time){
    const elapsed = time-start;
    const progress = Math.min(elapsed/duration,1);
    const ease = 1 - Math.pow(1-progress,3);
    startAngle = initial + rotation*ease;
    drawWheel();
    if(progress<1) requestAnimationFrame(animate);
    else{
      const index = (num - 1 - randomIndex + num)%num;
      const prize = prizes[index];
      resultDiv.innerText = `${name}, you got: ${prize}`;
      launchConfetti();
    }
  }
  requestAnimationFrame(animate);
}

// Confetti
function launchConfetti() {
  const confetti=[];
  const colors=["#ff0a54","#ff477e","#ff7096","#ff85a1","#fbb1b1","#f9bec7","#f7cad0"];
  for(let i=0;i<150;i++){
    confetti.push({
      x: Math.random()*confettiCanvas.width,
      y: Math.random()*-confettiCanvas.height,
      r: Math.random()*6+4,
      d: Math.random()*100,
      color: colors[Math.floor(Math.random()*colors.length)],
      tilt: Math.random()*10-10,
      tiltAngleIncrement: Math.random()*0.07+0.05,
      tiltAngle:0,
      speed: Math.random()*3+2
    });
  }

  function draw(){
    confettiCtx.clearRect(0,0,confettiCanvas.width,confettiCanvas.height);
    for(let i=0;i<confetti.length;i++){
      const c=confetti[i];
      confettiCtx.beginPath();
      confettiCtx.lineWidth=c.r/2;
      confettiCtx.strokeStyle=c.color;
      confettiCtx.moveTo(c.x+c.tilt+c.r/4,c.y);
      confettiCtx.lineTo(c.x+c.tilt,c.y+c.tilt+c.r/2);
      confettiCtx.stroke();
      c.tiltAngle+=c.tiltAngleIncrement;
      c.y+=c.speed;
      c.x+=Math.sin(c.tiltAngle)*2;
      c.tilt=Math.sin(c.tiltAngle)*15;
      if(c.y>confettiCanvas.height){ confetti.splice(i,1); i--; }
    }
    if(confetti.length>0) requestAnimationFrame(draw);
  }
  draw();
}

window.addEventListener('resize',()=>{
  confettiCanvas.width = window.innerWidth;
  confettiCanvas.height = window.innerHeight;
});
</script>

</body>
</html>
