<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Balaji Gaming Lucky Draw</title>

<style>
:root{
  --blue:#1e40af;
  --blue-hover:#1d4ed8;
}

*{box-sizing:border-box;transition:.25s ease}

body{
  margin:0;
  font-family:"Segoe UI",Arial,sans-serif;
  background:#020617;
  color:#fff;
  text-align:center;
  overflow-x:hidden;
}

.site-logo{margin-top:12px;width:90px}

/* RIBBON */
.promo-ribbon{
  width:100%;overflow:hidden;margin:14px 0;
  background:linear-gradient(90deg,#f59e0b,#fde68a,#f59e0b);
}
.ribbon-track{
  display:inline-flex;white-space:nowrap;
  padding:10px 0;font-size:14px;font-weight:700;
  color:#020617;
  animation:ribbonScroll 35s linear infinite;
}
@keyframes ribbonScroll{to{transform:translateX(-50%)}}

/* HEADING */
h1{margin:12px 0}

/* INPUTS */
input{
  padding:12px;margin:8px;width:260px;
  border-radius:8px;border:none;outline:none;
}

/* BUTTON */
button{
  padding:14px 36px;
  background:var(--blue);
  color:#fff;border:none;
  border-radius:12px;
  font-size:16px;font-weight:700;
  cursor:pointer;
}
button:hover{background:var(--blue-hover)}

/* GRADIENT RING */
.wheel-ring{
  position:relative;
  width:340px;height:340px;
  margin:30px auto;
  border-radius:50%;
  background:conic-gradient(
    #4285F4,#EA4335,#FBBC05,#34A853,#4285F4
  );
  padding:6px;
}
.wheel-ring::before{
  content:"";
  position:absolute;
  inset:6px;
  background:#020617;
  border-radius:50%;
}

/* WHEEL */
.wheel-container{position:relative;width:100%;height:100%}
.pointer{
  position:absolute;top:-10px;left:50%;
  transform:translateX(-50%) rotate(180deg);
  border-left:14px solid transparent;
  border-right:14px solid transparent;
  border-bottom:22px solid #fff;
  z-index:20;
}
#wheel{border-radius:50%;border:5px solid #fff}
.hub{
  position:absolute;width:70px;height:70px;
  background:#facc15;border-radius:50%;
  top:50%;left:50%;
  transform:translate(-50%,-50%);
  display:flex;align-items:center;justify-content:center;
}
.hub img{width:60%}

/* MODAL */
.modal{
  position:fixed;inset:0;
  background:rgba(0,0,0,.35);
  backdrop-filter:blur(6px);
  display:flex;align-items:center;justify-content:center;
  opacity:0;pointer-events:none;z-index:999;
}
.modal.active{opacity:1;pointer-events:auto}
.modal-box{
  background:rgba(255,255,255,.95);
  color:#020617;
  padding:28px;border-radius:22px;
  width:90%;max-width:360px;
  box-shadow:0 20px 40px rgba(0,0,0,.25);
}
.modal h2{color:#1e40af}
.note{font-size:13px;opacity:.75}

/* WhatsApp Button */
.wa-btn{
  margin-top:14px;
  padding:12px 18px;
  background:#25D366;
  color:#fff;border:none;
  border-radius:10px;
  font-size:14px;
  font-weight:700;
  cursor:pointer;
}
.wa-btn:hover{background:#1ebe5d}

/* CONFETTI */
#confettiCanvas{
  position:fixed;inset:0;
  pointer-events:none;z-index:1000;
}
</style>
</head>

<body>

<img src="logo.png" class="site-logo">

<div class="promo-ribbon">
  <div class="ribbon-track">
    â€¢ Daily Offers â€¢ 24Ã—7 Customer Support â€¢ Fast Deposit & Withdrawal â€¢
    â€¢ Daily Offers â€¢ 24Ã—7 Customer Support â€¢ Fast Deposit & Withdrawal â€¢
  </div>
</div>

<h1>ðŸŽ¡ Balaji Gaming Lucky Draw</h1>

<input id="name" placeholder="Enter your Game ID"><br>
<input id="phone" placeholder="Enter 10-digit phone number"><br>

<div class="wheel-ring">
  <div class="wheel-container">
    <div class="pointer"></div>
    <canvas id="wheel" width="320" height="320"></canvas>
    <div class="hub"><img src="logo.png"></div>
  </div>
</div>

<button onclick="spinWheel()">SPIN</button>

<div class="promo-ribbon">
  <div class="ribbon-track">
    â€¢ Christmas Offers Live â€¢ Daily Offers â€¢ 24Ã—7 Customer Support â€¢
  </div>
</div>

<!-- POPUP -->
<div class="modal" id="modal">
  <div class="modal-box">
    <h2>ðŸŽ‰ Congratulations!</h2>
    <p><strong>Game ID:</strong> <span id="mid"></span></p>
    <p><strong>You Won:</strong> <span id="mprize"></span></p>
    <p class="note">ðŸ“¸ Share your winning screenshot with us</p>

    <button class="wa-btn" onclick="shareOnWhatsApp()">
      ðŸ“¤ Share on WhatsApp
    </button>
  </div>
</div>

<!-- Hidden Share Card -->
<div id="shareCard" style="position:fixed;left:-9999px;width:320px;padding:20px;background:#fff;color:#000;border-radius:16px;font-family:Segoe UI">
  <h3 style="margin:0;color:#1e40af">ðŸŽ‰ Balaji Gaming</h3>
  <p><strong>Game ID:</strong> <span id="s_id"></span></p>
  <p><strong>Prize Won:</strong> <span id="s_prize"></span></p>
  <p style="font-size:12px;color:#555">Winning confirmation</p>
</div>

<canvas id="confettiCanvas"></canvas>

<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

<script>
/* --- WHEEL LOGIC (UNCHANGED) --- */
const canvas=document.getElementById("wheel");
const ctx=canvas.getContext("2d");
const prizes=["â‚¹100","â‚¹200","â‚¹300","â‚¹400","â‚¹500"];
const colors=["#1e40af","#f59e0b","#16a34a","#9333ea","#dc2626"];
const arc=(2*Math.PI)/prizes.length;
let startAngle=0;

function drawWheel(){
  const r=canvas.width/2;
  ctx.clearRect(0,0,canvas.width,canvas.height);
  prizes.forEach((p,i)=>{
    const a=startAngle+i*arc;
    ctx.beginPath();
    ctx.moveTo(r,r);
    ctx.arc(r,r,r,a,a+arc);
    ctx.fillStyle=colors[i];
    ctx.fill();
    ctx.strokeStyle="#fff";
    ctx.lineWidth=3;
    ctx.stroke();
    ctx.save();
    ctx.translate(r,r);
    ctx.rotate(a+arc/2);
    ctx.textAlign="right";
    ctx.fillStyle="#fff";
    ctx.font="bold 18px Arial";
    ctx.fillText(p,r-20,6);
    ctx.restore();
  });
}
drawWheel();

function spinWheel(){
  const name=document.getElementById("name").value.trim();
  const phone=document.getElementById("phone").value.trim();
  if(!name||!/^[6-9]\d{9}$/.test(phone)) return alert("Invalid details");

  const i=Math.floor(Math.random()*prizes.length);
  const target=(3*Math.PI/2)-(i*arc)-arc/2;
  const final=6*2*Math.PI+target;
  const start=performance.now();
  const dur=4200;
  const init=startAngle;

  function anim(t){
    const p=Math.min((t-start)/dur,1);
    startAngle=init+final*(1-Math.pow(1-p,3));
    drawWheel();
    if(p<1) requestAnimationFrame(anim);
    else{
      document.getElementById("mid").innerText=name;
      document.getElementById("mprize").innerText=prizes[i];
      document.getElementById("modal").classList.add("active");
      launchConfetti();
    }
  }
  requestAnimationFrame(anim);
}

/* --- CONFETTI --- */
const confettiCanvas=document.getElementById("confettiCanvas");
const cctx=confettiCanvas.getContext("2d");
confettiCanvas.width=innerWidth;
confettiCanvas.height=innerHeight;

function launchConfetti(){
  const pieces=[];
  for(let i=0;i<150;i++){
    pieces.push({x:Math.random()*innerWidth,y:-20,w:4,h:14,s:2+Math.random()*3});
  }
  (function draw(){
    cctx.clearRect(0,0,innerWidth,innerHeight);
    pieces.forEach((p,i)=>{
      cctx.fillStyle="#facc15";
      cctx.fillRect(p.x,p.y,p.w,p.h);
      p.y+=p.s;
      if(p.y>innerHeight)pieces.splice(i,1);
    });
    if(pieces.length) requestAnimationFrame(draw);
  })();
}

/* --- WHATSAPP SHARE --- */
function shareOnWhatsApp(){
  const id=document.getElementById("mid").innerText;
  const prize=document.getElementById("mprize").innerText;

  document.getElementById("s_id").innerText=id;
  document.getElementById("s_prize").innerText=prize;

  html2canvas(document.getElementById("shareCard")).then(canvas=>{
    const a=document.createElement("a");
    a.download="Balaji-Gaming-Win.png";
    a.href=canvas.toDataURL();
    a.click();

    const phone="917264835489"; // ðŸ”´ replace
    const msg=encodeURIComponent(`Hi, I won ${prize} in Balaji Gaming. Please find my screenshot attached.`);
    window.open(`https://wa.me/${phone}?text=${msg}`,"_blank");
  });
}
</script>

</body>
</html>
