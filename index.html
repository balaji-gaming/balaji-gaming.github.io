<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Balaji Gaming Lucky Draw Game</title>

<style>
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: radial-gradient(circle, #020617, #020617);
  color: #fff;
  text-align: center;
  overflow-x: hidden;
}

/* Website Logo */
.site-logo {
  margin-top: 20px;
  width: 120px;
}

/* Heading */
h1 {
  margin: 10px 0;
}

/* Inputs */
input {
  padding: 10px;
  margin: 8px;
  width: 260px;
  border-radius: 6px;
  border: none;
  outline: none;
}

/* Button */
button {
  padding: 12px 25px;
  background: #22c55e;
  border: none;
  border-radius: 8px;
  font-size: 16px;
  cursor: pointer;
}
button:hover {
  background: #16a34a;
}

/* Wheel container */
.wheel-container {
  position: relative;
  width: 340px;
  height: 340px;
  margin: 30px auto;
}

/* Pointer */
.pointer {
  position: absolute;
  top: -18px;
  left: 50%;
  transform: translateX(-50%);
  width: 0;
  height: 0;
  border-left: 18px solid transparent;
  border-right: 18px solid transparent;
  border-bottom: 30px solid gold;
  z-index: 20;
}

/* Wheel canvas */
#wheel {
  border-radius: 50%;
  background: #b91c1c;
  box-shadow: inset 0 0 0 10px #7f1d1d;
}

/* Center hub (uses website logo) */
.hub {
  position: absolute;
  width: 90px;
  height: 90px;
  background: radial-gradient(circle, #fde68a, #facc15);
  border-radius: 50%;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  box-shadow: 0 0 15px rgba(255,215,0,0.7);
  z-index: 15;
  display: flex;
  align-items: center;
  justify-content: center;
}

.hub img {
  width: 70%;
  height: 70%;
  object-fit: contain;
}

/* Result */
#result {
  margin-top: 20px;
  font-size: 18px;
}

/* Confetti */
#confettiCanvas {
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 9999;
}
</style>
</head>

<body>

<!-- Website logo (top) -->
<img src="logo.png" class="site-logo" alt="Balaji Gaming Logo">

<h1>ðŸŽ¡ Balaji Gaming Lucky Draw Game</h1>

<input id="name" placeholder="Enter your game ID "><br>
<input id="phone" placeholder="Enter 10-digit phone number"><br>

<div class="wheel-container">
  <div class="pointer"></div>
  <canvas id="wheel" width="340" height="340"></canvas>

  <!-- Center hub using SAME logo -->
  <div class="hub">
    <img src="logo.png" alt="Balaji Gaming">
  </div>
</div>

<button onclick="spinWheel()">SPIN</button>

<div id="result"></div>

<canvas id="confettiCanvas"></canvas>

<script>
/* -------- WHEEL -------- */
const canvas = document.getElementById("wheel");
const ctx = canvas.getContext("2d");

const prizes = ["â‚¹100", "â‚¹200", "â‚¹300", "â‚¹400", "â‚¹500"];
const colors = ["#dc2626", "#f59e0b", "#16a34a", "#2563eb", "#7c3aed"];
const total = prizes.length;
const arc = (2 * Math.PI) / total;
let angle = 0;

function drawWheel() {
  const r = canvas.width / 2;
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  for (let i = 0; i < total; i++) {
    const start = angle + i * arc;
    const end = start + arc;

    ctx.beginPath();
    ctx.moveTo(r, r);
    ctx.arc(r, r, r - 6, start, end);
    ctx.fillStyle = colors[i];
    ctx.fill();
    ctx.strokeStyle = "#fff";
    ctx.lineWidth = 3;
    ctx.stroke();

    ctx.save();
    ctx.translate(r, r);
    ctx.rotate(start + arc / 2);
    ctx.textAlign = "right";
    ctx.fillStyle = "#fff";
    ctx.font = "bold 20px Arial";
    ctx.fillText(prizes[i], r - 30, 8);
    ctx.restore();
  }
}
drawWheel();

/* -------- SPIN -------- */
function spinWheel() {
  const name = document.getElementById("name").value.trim();
  const phone = document.getElementById("phone").value.trim();
  if (!name) return alert("Enter your name");
  if (!/^[6-9]\d{9}$/.test(phone)) return alert("Enter valid phone number");

  const index = Math.floor(Math.random() * total);
  const target =
    6 * Math.PI * 2 + (total - index) * arc - arc / 2;

  const start = performance.now();
  const duration = 4000;
  const initial = angle;

  function animate(t) {
    const p = Math.min((t - start) / duration, 1);
    const ease = 1 - Math.pow(1 - p, 3);
    angle = initial + target * ease;
    drawWheel();
    if (p < 1) requestAnimationFrame(animate);
    else {
      document.getElementById("result").innerText =
        `${name}, you won ${prizes[index]} ðŸŽ‰`;
      launchConfetti();
    }
  }
  requestAnimationFrame(animate);
}

/* -------- CONFETTI -------- */
const confettiCanvas = document.getElementById("confettiCanvas");
const cctx = confettiCanvas.getContext("2d");
confettiCanvas.width = innerWidth;
confettiCanvas.height = innerHeight;

function launchConfetti() {
  const pieces = Array.from({ length: 180 }, () => ({
    x: Math.random() * confettiCanvas.width,
    y: -20,
    r: Math.random() * 6 + 4,
    s: Math.random() * 4 + 2,
    c: `hsl(${Math.random() * 360},100%,60%)`
  }));

  function draw() {
    cctx.clearRect(0, 0, confettiCanvas.width, confettiCanvas.height);
    pieces.forEach(p => {
      cctx.beginPath();
      cctx.fillStyle = p.c;
      cctx.arc(p.x, p.y, p.r, 0, Math.PI * 2);
      cctx.fill();
      p.y += p.s;
    });
    for (let i = pieces.length - 1; i >= 0; i--) {
      if (pieces[i].y > confettiCanvas.height) pieces.splice(i, 1);
    }
    if (pieces.length) requestAnimationFrame(draw);
  }
  draw();
}

window.onresize = () => {
  confettiCanvas.width = innerWidth;
  confettiCanvas.height = innerHeight;
};
</script>

</body>
</html>
